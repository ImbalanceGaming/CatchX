<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class games extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->database();
        $this->load->model('gamesModel');
    }
    
    public function index()
    {

        $graph = $this->createGraphs('Batman');

        if (!$graph['complete']) {
            die(var_dump($graph['error']));
        }

        $games = Model\Games::all();

        $data = array(
            'games' => $games
        );
        
        $this->load->view("shared/header");
        $this->load->view('games/index', $data);
        $this->load->view("shared/footer");
    }

    public function createGraphs($graphName, $baseTemplate = null) {

        $baseTemplate = '
            {
                "victory":"none","turn":0,"numberOfTurns":24,"revealTurns":[1,6,11,17,23],"doubles":2,"hiddens":3,
                "players":[
                    {"position":130,"turn":false,"control":true,"pawnImage":"pawnJoker.png","name":"Joker"},
                    {"position":126,"turn":true,"control":true,"pawnImage":"pawnBatman.png","name":"Batman"},
                    {"position":127,"turn":true,"control":true,"pawnImage":"pawnRobin.png","name":"Robin"},
                    {"position":128,"turn":true,"control":true,"pawnImage":"pawnGordon.png","name":"Gordon"},
                    {"position":129,"turn":true,"control":true,"pawnImage":"pawnCatwoman.png","name":"Catwoman"}
                ],
                "graph":{
                    "nodes":[
                        {
                            "x":1860,"y":1340,"adjacent":[1,2,5,7,8,27],
                            "colors":["#000099","#000099","#000099","#000099","#325E32","#325E32"]
                        },
                        {"x":2095,"y":1430,"adjacent":[0,3,10,8],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":1770,"y":1570,"adjacent":[0,3,4,27,25,44],"colors":["#000099","#000099","#000099","#000099","#C2B615","#C2B615"]},
                        {"x":2000,"y":1655,"adjacent":[1,2,9,26],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":1590,"y":1500,"adjacent":[2,5],"colors":["#000099","#000099"]},
                        {"x":1680,"y":1270,"adjacent":[0,4,6],"colors":["#000099","#000099","#000099"]},
                        {"x":1745,"y":1110,"adjacent":[5,7],"colors":["#000099","#000099"]},
                        {"x":1920,"y":1185,"adjacent":[0,6],"colors":["#000099","#000099"]},
                        {"x":2313,"y":1510,"adjacent":[13,11,1,9,0,25,15,25],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#C2B615"]},
                        {"x":2221,"y":1737,"adjacent":[8,3,25,14],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":2205,"y":1117,"adjacent":[1,11],"colors":["#000099","#000099"]},
                        {"x":2428,"y":1200,"adjacent":[10,38,12,8],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":2662,"y":1292,"adjacent":[11,13],"colors":["#000099","#000099"]},
                        {"x":2544,"y":1599,"adjacent":[12,8,14,15],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":2454,"y":1823,"adjacent":[9,13,17,24],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":2846,"y":1717,"adjacent":[13,17,16,8,23,19],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},
                        {"x":3044,"y":1793,"adjacent":[15,18,19],"colors":["#000099","#000099","#000099"]},
                        {"x":2764,"y":1947,"adjacent":[14,15,23,18],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":2957,"y":2021,"adjacent":[22,17,20,16],"colors":["#000099","#000099","#000099","#000099"]},
                        {"x":3230,"y":1865,"adjacent":[16,20,37,15,21],"colors":["#000099","#000099","#000099","#325E32","#325E32"]},{"x":3140,"y":2093,"adjacent":[21,18,19,32],"colors":["#000099","#000099","#000099","#C2B615"]},{"x":3063,"y":2302,"adjacent":[34,22,20,19,23,34],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2877,"y":2231,"adjacent":[23,18,33,21],"colors":["#000099","#000099","#000099","#000099"]},{"x":2690,"y":2156,"adjacent":[24,17,32,22,25,15,21,32],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#325E32"]},{"x":2376,"y":2035,"adjacent":[14,25,31,23],"colors":["#000099","#000099","#000099","#000099"]},{"x":2143,"y":1943,"adjacent":[26,9,24,30,27,8,23,30,2,8,32,48],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#325E32","#C2B615","#C2B615","#C2B615","#C2B615"]},{"x":1922,"y":1857,"adjacent":[27,3,25,29],"colors":["#000099","#000099","#000099","#000099"]},{"x":1689,"y":1766,"adjacent":[35,2,26,28,0,25],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32"]},{"x":1573,"y":2075,"adjacent":[27,29,40],"colors":["#000099","#000099","#000099"]},{"x":1803,"y":2162,"adjacent":[28,26,30,39],"colors":["#000099","#000099","#000099","#000099"]},{"x":2026,"y":2250,"adjacent":[29,25,31,32,25],"colors":["#000099","#000099","#000099","#325E32","#325E32"]},{"x":2260,"y":2338,"adjacent":[30,24,32],"colors":["#000099","#000099","#000099"]},{"x":2584,"y":2464,"adjacent":[31,23,33,46,34,23,30,46,25,20,56,50],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#325E32","#C2B615","#C2B615","#C2B615","#C2B615"]},{"x":2758,"y":2535,"adjacent":[32,22,34,47],"colors":["#000099","#000099","#000099","#000099"]},{"x":2943,"y":2602,"adjacent":[33,36,21,56,21,32,56],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":1401,"y":1660,"adjacent":[27,38,42],"colors":["#000099","#009C99","#009C99"]},{"x":3240,"y":2717,"adjacent":[34,37,125],"colors":["#000099","#009C99","#009C99"]},{"x":3372,"y":1918,"adjacent":[19,38,36],"colors":["#000099","#009C99","#009C99"]},{"x":2474,"y":1096,"adjacent":[11,37,35],"colors":["#000099","#009C99","#009C99"]},{"x":1783,"y":2423,"adjacent":[29,44,41],"colors":["#000099","#000099","#000099"]},{"x":1477,"y":2197,"adjacent":[28,42,43,44],"colors":["#000099","#000099","#000099","#000099"]},{"x":1657,"y":2659,"adjacent":[57,39],"colors":["#000099","#000099"]},{"x":1255,"y":2090,"adjacent":[40,35,43],"colors":["#000099","#009C99","#009C99"]},{"x":1288,"y":2237,"adjacent":[40,42,45],"colors":["#000099","#009C99","#009C99"]},{"x":1485,"y":2414,"adjacent":[40,39,45,2,59],"colors":["#000099","#000099","#000099","#C2B615","#C2B615"]},{"x":1352,"y":2556,"adjacent":[44,43,62],"colors":["#000099","#009C99","#009C99"]},{"x":2283,"y":2721,"adjacent":[47,48,50,32,32,50],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32"]},{"x":2504,"y":2803,"adjacent":[46,51,33],"colors":["#000099","#000099","#000099"]},{"x":1978,"y":2614,"adjacent":[46,49,57,25,50],"colors":["#000099","#000099","#000099","#C2B615","#C2B615"]},{"x":1873,"y":2892,"adjacent":[48,57,52,50],"colors":["#000099","#000099","#000099","#000099"]},{"x":2180,"y":3006,"adjacent":[53,49,46,51,46,56,65,57,48,32,59,56,66],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#325E32","#C2B615","#C2B615","#C2B615","#C2B615","#C2B615"]},{"x":2399,"y":3090,"adjacent":[50,47,56,54],"colors":["#000099","#000099","#000099","#000099"]},{"x":1766,"y":3197,"adjacent":[49,58,64,53],"colors":["#000099","#000099","#000099","#000099"]},{"x":2069,"y":3308,"adjacent":[52,50,65,54],"colors":["#000099","#000099","#000099","#000099"]},{"x":2290,"y":3386,"adjacent":[53,68,51,55],"colors":["#000099","#000099","#000099","#000099"]},{"x":2562,"y":3484,"adjacent":[54,67,71,56],"colors":["#000099","#000099","#000099","#000099"]},{"x":2673,"y":3191,"adjacent":[51,72,55,34,34,50,67,32,50,66],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#C2B615","#C2B615","#C2B615"]},{"x":1606,"y":2800,"adjacent":[48,41,60,49,58,50,63],"colors":["#000099","#000099","#000099","#000099","#000099","#325E32","#325E32"]},{"x":1496,"y":3097,"adjacent":[63,59,57,52],"colors":["#000099","#000099","#000099","#000099"]},{"x":1278,"y":3021,"adjacent":[60,61,58,44,50,76],"colors":["#000099","#000099","#000099","#C2B615","#C2B615","#C2B615"]},{"x":1386,"y":2721,"adjacent":[57,59],"colors":["#000099","#000099"]},{"x":1167,"y":3317,"adjacent":[59,62,63],"colors":["#000099","#000099","#000099"]},{"x":996,"y":3253,"adjacent":[61,45,82],"colors":["#000099","#009C99","#009C99"]},{"x":1388,"y":3398,"adjacent":[61,58,64,57,65,70],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":1654,"y":3492,"adjacent":[63,52,70,65],"colors":["#000099","#000099","#000099","#000099"]},{"x":1962,"y":3604,"adjacent":[64,69,68,53,67,50,63,70],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32","#325E32"]},{"x":2097,"y":3909,"adjacent":[69,68,95,56,50,91,102],"colors":["#000099","#000099","#000099","#C2B615","#C2B615","#C2B615","#C2B615"]},{"x":2492,"y":3682,"adjacent":[68,55,96,56,65,96],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2196,"y":3644,"adjacent":[66,65,67,54],"colors":["#000099","#000099","#000099","#000099"]},{"x":1881,"y":3832,"adjacent":[65,70,66,89],"colors":["#000099","#000099","#000099","#009C99"]},{"x":1575,"y":3718,"adjacent":[64,69,74,65,63,74],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2789,"y":3571,"adjacent":[55,73,99],"colors":["#000099","#000099","#000099"]},{"x":2897,"y":3271,"adjacent":[56,73],"colors":["#000099","#000099"]},{"x":2844,"y":3426,"adjacent":[71,72],"colors":["#000099","#000099"]},{"x":1487,"y":3809,"adjacent":[75,79,70,70,79],"colors":["#000099","#000099","#000099","#325E32","#325E32"]},{"x":1285,"y":3732,"adjacent":[76,74,78],"colors":["#000099","#000099","#000099"]},{"x":1077,"y":3659,"adjacent":[77,75,59,83],"colors":["#000099","#000099","#C2B615","#C2B615"]},{"x":973,"y":3949,"adjacent":[76,78],"colors":["#000099","#000099"]},{"x":1178,"y":4029,"adjacent":[75,77,79,80],"colors":["#000099","#000099","#000099","#000099"]},{"x":1379,"y":4097,"adjacent":[78,74,81,88,74,90,83],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":1052,"y":4381,"adjacent":[78,81],"colors":["#000099","#000099"]},{"x":1249,"y":4453,"adjacent":[80,79,87,83],"colors":["#000099","#000099","#000099","#000099"]},{"x":974,"y":4723,"adjacent":[83,62,84],"colors":["#000099","#009C99","#009C99"]},{"x":1132,"y":4780,"adjacent":[82,81,84,86,79,93,76,115],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#C2B615","#C2B615"]},{"x":1058,"y":4980,"adjacent":[83,82,120],"colors":["#000099","#009C99","#009C99"]},{"x":1290,"y":5112,"adjacent":[86,113],"colors":["#000099","#009C99"]},{"x":1378,"y":4871,"adjacent":[83,85,92,87],"colors":["#000099","#000099","#000099","#000099"]},{"x":1500,"y":4545,"adjacent":[81,88,86,91],"colors":["#000099","#000099","#000099","#000099"]},{"x":1627,"y":4189,"adjacent":[79,89,90,87],"colors":["#000099","#000099","#000099","#000099"]},{"x":1714,"y":3962,"adjacent":[88,69],"colors":["#000099","#009C99"]},{"x":1838,"y":4266,"adjacent":[88,91,95,79,103],"colors":["#000099","#000099","#000099","#325E32","#325E32"]},{"x":1708,"y":4618,"adjacent":[87,92,94,90,66,115],"colors":["#000099","#000099","#000099","#000099","#C2B615","#C2B615"]},{"x":1592,"y":4945,"adjacent":[86,109,93,91],"colors":["#000099","#000099","#000099","#000099"]},{"x":1821,"y":5030,"adjacent":[92,110,108,94,105,83],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32"]},{"x":1941,"y":4703,"adjacent":[91,95,105,93],"colors":["#000099","#000099","#000099","#000099"]},{"x":2068,"y":4350,"adjacent":[90,94,103,66],"colors":["#000099","#000099","#000099","#000099"]},{"x":2410,"y":4143,"adjacent":[103,97,67,67,103,98],"colors":["#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2687,"y":4244,"adjacent":[96,102,125,98],"colors":["#000099","#000099","#000099","#000099"]},{"x":2936,"y":4335,"adjacent":[97,101,99,96,106],"colors":["#000099","#000099","#000099","#325E32","#325E32"]},{"x":3174,"y":4422,"adjacent":[100,98,71],"colors":["#000099","#000099","#000099"]},{"x":3066,"y":4714,"adjacent":[99,107,101],"colors":["#000099","#000099","#000099"]},{"x":2831,"y":4627,"adjacent":[100,106,98,102],"colors":["#000099","#000099","#000099","#000099"]},{"x":2583,"y":4537,"adjacent":[104,103,97,101,66,115],"colors":["#000099","#000099","#000099","#000099","#C2B615","#C2B615"]},{"x":2304,"y":4436,"adjacent":[102,105,95,96,90,96,105],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2452,"y":4887,"adjacent":[105,106,102],"colors":["#000099","#000099","#000099"]},{"x":2175,"y":4788,"adjacent":[94,108,104,103,106,103,93],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32","#325E32"]},{"x":2700,"y":4978,"adjacent":[104,124,107,101,98,105],"colors":["#000099","#000099","#000099","#000099","#325E32","#325E32"]},{"x":2937,"y":5065,"adjacent":[106,100],"colors":["#000099","#000099"]},{"x":2057,"y":5113,"adjacent":[93,105],"colors":["#000099","#000099"]},{"x":1519,"y":5159,"adjacent":[92,111],"colors":["#000099","#009C99"]},{"x":1734,"y":5278,"adjacent":[93,112],"colors":["#000099","#009C99"]},{"x":1532,"y":5259,"adjacent":[115,109],"colors":["#000099","#009C99"]},{"x":1702,"y":5366,"adjacent":[116,110],"colors":["#000099","#009C99"]},{"x":1331,"y":5229,"adjacent":[114,85],"colors":["#000099","#009C99"]},{"x":1279,"y":5371,"adjacent":[115,113,120,118],"colors":["#000099","#000099","#000099","#000099"]},{"x":1468,"y":5438,"adjacent":[116,111,114,117,91,83,102],"colors":["#000099","#000099","#000099","#000099","#C2B615","#C2B615","#C2B615"]},{"x":1653,"y":5506,"adjacent":[112,121,122,115],"colors":["#000099","#000099","#000099","#000099"]},{"x":1383,"y":5669,"adjacent":[118,115,123],"colors":["#000099","#000099","#000099"]},{"x":1193,"y":5607,"adjacent":[114,117,119],"colors":["#000099","#000099","#000099"]},{"x":1088,"y":5892,"adjacent":[118,120,123],"colors":["#000099","#009C99","#009C99"]},{"x":1156,"y":5329,"adjacent":[114,84,119],"colors":["#000099","#009C99","#009C99"]},{"x":1833,"y":5569,"adjacent":[116,122,124],"colors":["#000099","#009C99","#009C99"]},{"x":1585,"y":5691,"adjacent":[116,123,121],"colors":["#000099","#009C99","#009C99"]},{"x":1348,"y":5756,"adjacent":[117,119,122],"colors":["#000099","#009C99","#009C99"]},{"x":2628,"y":5187,"adjacent":[106,121],"colors":["#000099","#009C99"]},{"x":2754,"y":4073,"adjacent":[97,36],"colors":["#000099","#009C99"]},{"x":400,"y":1000,"adjacent":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],"colors":["#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080"]},{"x":500,"y":1000,"adjacent":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],"colors":["#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080"]},{"x":600,"y":1000,"adjacent":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],"colors":["#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080"]},{"x":700,"y":1000,"adjacent":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],"colors":["#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080"]},{"x":800,"y":1000,"adjacent":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],"colors":["#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080","#800080"]}],"edges":[{"node1":102,"node2":115,"type":"straight","color":"#C2B615"},{"node1":115,"node2":83,"type":"straight","color":"#C2B615"},{"node1":91,"node2":115,"type":"straight","color":"#C2B615"},{"node1":66,"node2":102,"type":"straight","color":"#C2B615"},{"node1":66,"node2":91,"type":"straight","color":"#C2B615"},{"node1":76,"node2":83,"type":"straight","color":"#C2B615"},{"node1":50,"node2":66,"type":"straight","color":"#C2B615"},{"node1":56,"node2":66,"type":"straight","color":"#C2B615"},{"node1":59,"node2":76,"type":"straight","color":"#C2B615"},{"node1":50,"node2":56,"type":"straight","color":"#C2B615"},{"node1":59,"node2":50,"type":"straight","color":"#C2B615"},{"node1":59,"node2":44,"type":"straight","color":"#C2B615"},{"node1":2,"node2":44,"type":"straight","color":"#C2B615"},{"node1":32,"node2":50,"type":"straight","color":"#C2B615"},{"node1":48,"node2":50,"type":"straight","color":"#C2B615"},{"node1":32,"node2":56,"type":"straight","color":"#C2B615"},{"node1":32,"node2":20,"type":"straight","color":"#C2B615"},{"node1":25,"node2":48,"type":"straight","color":"#C2B615"},{"node1":25,"node2":32,"type":"straight","color":"#C2B615"},{"node1":25,"node2":8,"type":"straight","color":"#C2B615"},{"node1":25,"node2":2,"type":"straight","color":"#C2B615"},{"node1":89,"node2":69,"type":"straight","color":"#009C99"},{"node1":113,"node2":85,"type":"straight","color":"#009C99"},{"node1":111,"node2":109,"type":"straight","color":"#009C99"},{"node1":112,"node2":110,"type":"straight","color":"#009C99"},{"node1":36,"node2":125,"type":"straight","color":"#009C99"},{"node1":121,"node2":124,"type":"straight","color":"#009C99"},{"node1":122,"node2":121,"type":"straight","color":"#009C99"},{"node1":123,"node2":122,"type":"straight","color":"#009C99"},{"node1":119,"node2":123,"type":"straight","color":"#009C99"},{"node1":120,"node2":119,"type":"straight","color":"#009C99"},{"node1":84,"node2":120,"type":"straight","color":"#009C99"},{"node1":82,"node2":84,"type":"straight","color":"#009C99"},{"node1":62,"node2":82,"type":"straight","color":"#009C99"},{"node1":45,"node2":62,"type":"straight","color":"#009C99"},{"node1":43,"node2":45,"type":"straight","color":"#009C99"},{"node1":42,"node2":43,"type":"straight","color":"#009C99"},{"node1":35,"node2":42,"type":"straight","color":"#009C99"},{"node1":38,"node2":35,"type":"straight","color":"#009C99"},{"node1":37,"node2":36,"type":"straight","color":"#009C99"},{"node1":38,"node2":37,"type":"straight","color":"#009C99"},{"node1":83,"node2":93,"type":"straight","color":"#325E32"},{"node1":79,"node2":83,"type":"straight","color":"#325E32"},{"node1":105,"node2":93,"type":"straight","color":"#325E32"},{"node1":105,"node2":103,"type":"straight","color":"#325E32"},{"node1":106,"node2":105,"type":"straight","color":"#325E32"},{"node1":98,"node2":106,"type":"straight","color":"#325E32"},{"node1":96,"node2":98,"type":"straight","color":"#325E32"},{"node1":103,"node2":96,"type":"straight","color":"#325E32"},{"node1":90,"node2":103,"type":"straight","color":"#325E32"},{"node1":79,"node2":90,"type":"straight","color":"#325E32"},{"node1":74,"node2":79,"type":"straight","color":"#325E32"},{"node1":67,"node2":96,"type":"straight","color":"#325E32"},{"node1":70,"node2":74,"type":"straight","color":"#325E32"},{"node1":63,"node2":70,"type":"straight","color":"#325E32"},{"node1":65,"node2":70,"type":"straight","color":"#325E32"},{"node1":63,"node2":65,"type":"straight","color":"#325E32"},{"node1":57,"node2":63,"type":"straight","color":"#325E32"},{"node1":50,"node2":57,"type":"straight","color":"#325E32"},{"node1":65,"node2":50,"type":"straight","color":"#325E32"},{"node1":67,"node2":65,"type":"straight","color":"#325E32"},{"node1":56,"node2":67,"type":"straight","color":"#325E32"},{"node1":50,"node2":56,"type":"straight","color":"#325E32"},{"node1":46,"node2":50,"type":"straight","color":"#325E32"},{"node1":34,"node2":56,"type":"straight","color":"#325E32"},{"node1":32,"node2":46,"type":"straight","color":"#325E32"},{"node1":30,"node2":25,"type":"straight","color":"#325E32"},{"node1":32,"node2":30,"type":"straight","color":"#325E32"},{"node1":32,"node2":23,"type":"straight","color":"#325E32"},{"node1":34,"node2":32,"type":"straight","color":"#325E32"},{"node1":21,"node2":34,"type":"straight","color":"#325E32"},{"node1":21,"node2":23,"type":"straight","color":"#325E32"},{"node1":19,"node2":21,"type":"straight","color":"#325E32"},{"node1":15,"node2":19,"type":"straight","color":"#325E32"},{"node1":23,"node2":15,"type":"straight","color":"#325E32"},{"node1":25,"node2":23,"type":"straight","color":"#325E32"},{"node1":8,"node2":15,"type":"straight","color":"#325E32"},{"node1":66,"node2":95,"type":"straight","color":"#000099"},{"node1":71,"node2":99,"type":"straight","color":"#000099"},{"node1":67,"node2":96,"type":"straight","color":"#000099"},{"node1":70,"node2":74,"type":"straight","color":"#000099"},{"node1":34,"node2":56,"type":"straight","color":"#000099"},{"node1":47,"node2":33,"type":"straight","color":"#000099"},{"node1":46,"node2":32,"type":"straight","color":"#000099"},{"node1":44,"node2":45,"type":"straight","color":"#000099"},{"node1":39,"node2":41,"type":"straight","color":"#000099"},{"node1":44,"node2":39,"type":"straight","color":"#000099"},{"node1":40,"node2":44,"type":"straight","color":"#000099"},{"node1":40,"node2":43,"type":"straight","color":"#000099"},{"node1":40,"node2":42,"type":"straight","color":"#000099"},{"node1":28,"node2":40,"type":"straight","color":"#000099"},{"node1":29,"node2":39,"type":"straight","color":"#000099"},{"node1":25,"node2":8,"type":"straight","color":"#325E32"},{"node1":27,"node2":25,"type":"straight","color":"#325E32"},{"node1":0,"node2":27,"type":"straight","color":"#325E32"},{"node1":0,"node2":8,"type":"straight","color":"#325E32"},{"node1":0,"node2":1,"type":"straight","color":"#000099"},{"node1":0,"node2":2,"type":"straight","color":"#000099"},{"node1":0,"node2":5,"type":"straight","color":"#000099"},{"node1":0,"node2":7,"type":"straight","color":"#000099"},{"node1":1,"node2":3,"type":"straight","color":"#000099"},{"node1":2,"node2":3,"type":"straight","color":"#000099"},{"node1":2,"node2":4,"type":"straight","color":"#000099"},{"node1":4,"node2":5,"type":"straight","color":"#000099"},{"node1":5,"node2":6,"type":"straight","color":"#000099"},{"node1":6,"node2":7,"type":"straight","color":"#000099"},{"node1":1,"node2":10,"type":"straight","color":"#000099"},{"node1":10,"node2":11,"type":"straight","color":"#000099"},{"node1":11,"node2":38,"type":"straight","color":"#000099"},{"node1":11,"node2":12,"type":"straight","color":"#000099"},{"node1":12,"node2":13,"type":"straight","color":"#000099"},{"node1":13,"node2":8,"type":"straight","color":"#000099"},{"node1":8,"node2":11,"type":"straight","color":"#000099"},{"node1":1,"node2":8,"type":"straight","color":"#000099"},{"node1":8,"node2":9,"type":"straight","color":"#000099"},{"node1":3,"node2":9,"type":"straight","color":"#000099"},{"node1":35,"node2":27,"type":"straight","color":"#000099"},{"node1":27,"node2":2,"type":"straight","color":"#000099"},{"node1":27,"node2":26,"type":"straight","color":"#000099"},{"node1":26,"node2":3,"type":"straight","color":"#000099"},{"node1":26,"node2":25,"type":"straight","color":"#000099"},{"node1":25,"node2":9,"type":"straight","color":"#000099"},{"node1":9,"node2":14,"type":"straight","color":"#000099"},{"node1":14,"node2":13,"type":"straight","color":"#000099"},{"node1":13,"node2":15,"type":"straight","color":"#000099"},{"node1":14,"node2":17,"type":"straight","color":"#000099"},{"node1":17,"node2":15,"type":"straight","color":"#000099"},{"node1":24,"node2":14,"type":"straight","color":"#000099"},{"node1":25,"node2":24,"type":"straight","color":"#000099"},{"node1":28,"node2":27,"type":"straight","color":"#000099"},{"node1":28,"node2":29,"type":"straight","color":"#000099"},{"node1":29,"node2":26,"type":"straight","color":"#000099"},{"node1":29,"node2":30,"type":"straight","color":"#000099"},{"node1":30,"node2":25,"type":"straight","color":"#000099"},{"node1":30,"node2":31,"type":"straight","color":"#000099"},{"node1":31,"node2":24,"type":"straight","color":"#000099"},{"node1":24,"node2":23,"type":"straight","color":"#000099"},{"node1":23,"node2":17,"type":"straight","color":"#000099"},{"node1":31,"node2":32,"type":"straight","color":"#000099"},{"node1":32,"node2":23,"type":"straight","color":"#000099"},{"node1":23,"node2":22,"type":"straight","color":"#000099"},{"node1":22,"node2":18,"type":"straight","color":"#000099"},{"node1":18,"node2":17,"type":"straight","color":"#000099"},{"node1":100,"node2":99,"type":"straight","color":"#000099"},{"node1":46,"node2":47,"type":"straight","color":"#000099"},{"node1":48,"node2":46,"type":"straight","color":"#000099"},{"node1":49,"node2":48,"type":"straight","color":"#000099"},{"node1":57,"node2":48,"type":"straight","color":"#000099"},{"node1":57,"node2":41,"type":"straight","color":"#000099"},{"node1":60,"node2":57,"type":"straight","color":"#000099"},{"node1":57,"node2":49,"type":"straight","color":"#000099"},{"node1":60,"node2":59,"type":"straight","color":"#000099"},{"node1":59,"node2":61,"type":"straight","color":"#000099"},{"node1":61,"node2":62,"type":"straight","color":"#000099"},{"node1":61,"node2":63,"type":"straight","color":"#000099"},{"node1":63,"node2":58,"type":"straight","color":"#000099"},{"node1":58,"node2":59,"type":"straight","color":"#000099"},{"node1":58,"node2":57,"type":"straight","color":"#000099"},{"node1":49,"node2":52,"type":"straight","color":"#000099"},{"node1":52,"node2":58,"type":"straight","color":"#000099"},{"node1":63,"node2":64,"type":"straight","color":"#000099"},{"node1":64,"node2":52,"type":"straight","color":"#000099"},{"node1":52,"node2":53,"type":"straight","color":"#000099"},{"node1":53,"node2":50,"type":"straight","color":"#000099"},{"node1":50,"node2":49,"type":"straight","color":"#000099"},{"node1":50,"node2":46,"type":"straight","color":"#000099"},{"node1":50,"node2":51,"type":"straight","color":"#000099"},{"node1":51,"node2":47,"type":"straight","color":"#000099"},{"node1":51,"node2":56,"type":"straight","color":"#000099"},{"node1":56,"node2":72,"type":"straight","color":"#000099"},{"node1":70,"node2":64,"type":"straight","color":"#000099"},{"node1":64,"node2":65,"type":"straight","color":"#000099"},{"node1":65,"node2":69,"type":"straight","color":"#000099"},{"node1":70,"node2":69,"type":"straight","color":"#000099"},{"node1":69,"node2":66,"type":"straight","color":"#000099"},{"node1":66,"node2":68,"type":"straight","color":"#000099"},{"node1":68,"node2":65,"type":"straight","color":"#000099"},{"node1":68,"node2":67,"type":"straight","color":"#000099"},{"node1":65,"node2":53,"type":"straight","color":"#000099"},{"node1":53,"node2":54,"type":"straight","color":"#000099"},{"node1":54,"node2":68,"type":"straight","color":"#000099"},{"node1":51,"node2":54,"type":"straight","color":"#000099"},{"node1":54,"node2":55,"type":"straight","color":"#000099"},{"node1":67,"node2":55,"type":"straight","color":"#000099"},{"node1":55,"node2":71,"type":"straight","color":"#000099"},{"node1":71,"node2":73,"type":"straight","color":"#000099"},{"node1":73,"node2":72,"type":"straight","color":"#000099"},{"node1":77,"node2":76,"type":"straight","color":"#000099"},{"node1":76,"node2":75,"type":"straight","color":"#000099"},{"node1":74,"node2":75,"type":"straight","color":"#000099"},{"node1":75,"node2":78,"type":"straight","color":"#000099"},{"node1":78,"node2":77,"type":"straight","color":"#000099"},{"node1":78,"node2":79,"type":"straight","color":"#000099"},{"node1":79,"node2":74,"type":"straight","color":"#000099"},{"node1":78,"node2":80,"type":"straight","color":"#000099"},{"node1":80,"node2":81,"type":"straight","color":"#000099"},{"node1":81,"node2":79,"type":"straight","color":"#000099"},{"node1":79,"node2":88,"type":"straight","color":"#000099"},{"node1":88,"node2":89,"type":"straight","color":"#000099"},{"node1":88,"node2":90,"type":"straight","color":"#000099"},{"node1":81,"node2":87,"type":"straight","color":"#000099"},{"node1":87,"node2":88,"type":"straight","color":"#000099"},{"node1":82,"node2":83,"type":"straight","color":"#000099"},{"node1":83,"node2":81,"type":"straight","color":"#000099"},{"node1":83,"node2":84,"type":"straight","color":"#000099"},{"node1":83,"node2":86,"type":"straight","color":"#000099"},{"node1":86,"node2":85,"type":"straight","color":"#000099"},{"node1":86,"node2":92,"type":"straight","color":"#000099"},{"node1":92,"node2":109,"type":"straight","color":"#000099"},{"node1":92,"node2":93,"type":"straight","color":"#000099"},{"node1":93,"node2":110,"type":"straight","color":"#000099"},{"node1":93,"node2":108,"type":"straight","color":"#000099"},{"node1":86,"node2":87,"type":"straight","color":"#000099"},{"node1":87,"node2":91,"type":"straight","color":"#000099"},{"node1":91,"node2":92,"type":"straight","color":"#000099"},{"node1":91,"node2":94,"type":"straight","color":"#000099"},{"node1":91,"node2":90,"type":"straight","color":"#000099"},{"node1":90,"node2":95,"type":"straight","color":"#000099"},{"node1":95,"node2":94,"type":"straight","color":"#000099"},{"node1":94,"node2":105,"type":"straight","color":"#000099"},{"node1":94,"node2":93,"type":"straight","color":"#000099"},{"node1":108,"node2":105,"type":"straight","color":"#000099"},{"node1":105,"node2":104,"type":"straight","color":"#000099"},{"node1":104,"node2":106,"type":"straight","color":"#000099"},{"node1":106,"node2":124,"type":"straight","color":"#000099"},{"node1":106,"node2":107,"type":"straight","color":"#000099"},{"node1":107,"node2":100,"type":"straight","color":"#000099"},{"node1":100,"node2":101,"type":"straight","color":"#000099"},{"node1":101,"node2":106,"type":"straight","color":"#000099"},{"node1":104,"node2":102,"type":"straight","color":"#000099"},{"node1":102,"node2":103,"type":"straight","color":"#000099"},{"node1":103,"node2":105,"type":"straight","color":"#000099"},{"node1":95,"node2":103,"type":"straight","color":"#000099"},{"node1":103,"node2":96,"type":"straight","color":"#000099"},{"node1":96,"node2":97,"type":"straight","color":"#000099"},{"node1":102,"node2":97,"type":"straight","color":"#000099"},{"node1":97,"node2":125,"type":"straight","color":"#000099"},{"node1":97,"node2":98,"type":"straight","color":"#000099"},{"node1":98,"node2":101,"type":"straight","color":"#000099"},{"node1":101,"node2":102,"type":"straight","color":"#000099"},{"node1":98,"node2":99,"type":"straight","color":"#000099"},{"node1":55,"node2":56,"type":"straight","color":"#000099"},{"node1":32,"node2":33,"type":"straight","color":"#000099"},{"node1":33,"node2":22,"type":"straight","color":"#000099"},{"node1":33,"node2":34,"type":"straight","color":"#000099"},{"node1":34,"node2":36,"type":"straight","color":"#000099"},{"node1":34,"node2":21,"type":"straight","color":"#000099"},{"node1":21,"node2":22,"type":"straight","color":"#000099"},{"node1":21,"node2":20,"type":"straight","color":"#000099"},{"node1":20,"node2":18,"type":"straight","color":"#000099"},{"node1":15,"node2":16,"type":"straight","color":"#000099"},{"node1":16,"node2":18,"type":"straight","color":"#000099"},{"node1":16,"node2":19,"type":"straight","color":"#000099"},{"node1":19,"node2":20,"type":"straight","color":"#000099"},{"node1":19,"node2":37,"type":"straight","color":"#000099"},{"node1":112,"node2":116,"type":"straight","color":"#000099"},{"node1":116,"node2":121,"type":"straight","color":"#000099"},{"node1":122,"node2":116,"type":"straight","color":"#000099"},{"node1":116,"node2":115,"type":"straight","color":"#000099"},{"node1":115,"node2":111,"type":"straight","color":"#000099"},{"node1":114,"node2":115,"type":"straight","color":"#000099"},{"node1":114,"node2":113,"type":"straight","color":"#000099"},{"node1":120,"node2":114,"type":"straight","color":"#000099"},{"node1":114,"node2":118,"type":"straight","color":"#000099"},{"node1":118,"node2":117,"type":"straight","color":"#000099"},{"node1":117,"node2":115,"type":"straight","color":"#000099"},{"node1":117,"node2":123,"type":"straight","color":"#000099"},{"node1":118,"node2":119,"type":"straight","color":"#000099"}]
                },
                "log":[],
                "lastKnownJokerPosition":130,
                "turnSide":"good"}';

        $data = json_decode($baseTemplate);

        $nodes = $data->graph->nodes;

        $nodeCount = count($nodes);

        $graphObject = Model\Graphs::limit(1)->find_by_name($graphName);

        if (!empty($graphObject)) {
            return array(
                'complete'=>false,
                'error'=>'Error - Graph already exists.'
            );
        }

        $graphObject = new Model\Graphs();
        $graphObject->no_of_nodes = $nodeCount;
        $graphObject->name = $graphName;
        $graphObject->save();
        $graphObject->id = Model\Graphs::last_created()->id;

        foreach ($nodes as $key=>$node) {
            foreach ($node->colors as $key2=>$color) {
                $colorObject = Model\Colors::limit(1)->find_by_hex_value($color);

                if (empty($colorObject)) {
                    /** @var  $colorObject */
                    $colorObject = new Model\Colors();
                    $colorObject->name = '';
                    $colorObject->hex_value = $color;
                    $colorObject->save();

                    $node->colors[$key2] = array(
                        'hexCode'=>$color,
                        'dbId'=>Model\Colors::last_created()->id
                    );
                } else {
                    $node->colors[$key2] = array(
                        'hexCode'=>$color,
                        'dbId'=>$colorObject[0]->id
                    );
                }
            }

            $nodeObject = new Model\Nodes();
            $nodeObject->graph_id = $graphObject->id;
            $nodeObject->x = $node->x;
            $nodeObject->y = $node->y;
            $nodeObject->save();

            $nodes[$key]->dbId = Model\Nodes::last_created()->id;
        }

        foreach ($nodes as $key=>$node) {
            $linkCount = 0;
            foreach ($node->adjacent as $key2=>$nodeLink) {
                $linkObject = new Model\NodeLinks();
                $linkObject->node_id = $node->dbId;
                $linkObject->linked_node_id = $nodes[$nodeLink]->dbId;
                $linkObject->color_id = $node->colors[$linkCount]['dbId'];
                $linkObject->save();
                $linkCount++;
            }
        }

        return array(
            'complete'=>true
        );

    }
    
    public function join($name)
    {
        $this->load->library('form_validation');
        $this->form_validation->set_rules('gameName', 'Game name', 'required');
        $this->form_validation->set_rules('password', 'Password', 'required|checkLogin');
        
        if ($this->form_validation->run() == FALSE)
        {
            $data = array
            (
                'gameName'=>$name
            );

            $this->load->view("shared/header");
            $this->load->view("games/join", $data);
            $this->load->view("shared/footer");
        }
        else
        {
            $password = $this->input->post('password');
            $id = $this->gamesModel->getID($name, $password);
            
            $newdata = array(
                'id'  => $id,
                'password'   => $password,
                'name' => $name
            );
            
            $this->session->set_userdata($newdata);
            
            redirect('/games/game/', 'refresh');
        }   
    }
    
    public function CheckLogin()
    {
        $username = $this->input->post('username');
        $password = $this->input->post('password');
        
        if ($this->gamesModel->checkPassword($gameName, $password))
        {
            return True;
        }
        else
        {
            $this->form_validation->set_message('CheckLogin', 'Game name or password is invalid');
            return False;
        }     
    }

    
    public function host()
    {
        $this->load->library('form_validation');
        $this->form_validation->set_rules('gameName', 'Game name', 'required|callback_gameNameIsUnique');
        $this->form_validation->set_rules('password', 'Password', 'required');
        
        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view("shared/header");
            $this->load->view('games/host');
            $this->load->view("shared/footer");
        }
        else
        {
            $password = $this->input->post('password');
            $name = $this->input->post('gameName');
            $id = $this->gamesModel->createGame($name, $password);
            
            $newdata = array(
                'id'  => $id,
                'password'   => $password,
                'name' => $name
            );
            
            $this->session->set_userdata($newdata);
            
            redirect('/games/game/', 'refresh');
        }
    }
    
    public function gameNameIsUnique($gameName)
    {
        $gameNames = $this->gamesModel->getGames();
        
        if (in_array($gameName, $gameNames))
        {
                $this->form_validation->set_message('gameNameIsUnique', 'Game name already exists');
                return FALSE;
        }
        else
        {
                return TRUE;
        }
    }
    
    public function game()
    {
        $id = $this->session->userdata('id');
        $password = $this->session->userdata('password');
        $name = $this->session->userdata('name');
        
        if ($id != null && $password != null && $name != null)
        {
            $data = array(
                'id' => $id,
                'password' => $password,
                'name' => $name
            );
            
            $this->load->view("shared/header");
            $this->load->view("games/game", $data);
            $this->load->view("shared/footer");
        }
        else
        {
            
            echo ($id);
            echo "<br/>";
            echo ($password);
            echo "<br/>";
            echo ($name);
            // TODO: Redirect to game not found page;
        }
    }
}
